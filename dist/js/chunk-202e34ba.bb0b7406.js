(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-202e34ba"],{"413d":function(t,e,a){"use strict";var i=a("fc2f"),s=a.n(i);s.a},"6d04":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ml-15"},[a("h2",{staticClass:"mb-4 font-bold uppercase gx-caption"},[t._v("Mi contabilidad")]),a("div",{staticClass:"flex flex-col items-center content-center w-full "},[a("HomeCalendar")],1)])},s=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.myAccountingFirms?a("div",{staticClass:"flex flex-col min-h-0 w-50 rounded-lg shadow-2 pl-2 border w-full max-w-2xl bg-calendar-background"},[a("div",{staticClass:"flex flex-row items-stretch text-black content-center max-w-2xl text-xl mt-3"},[a("div",{staticClass:"flex-1 text-right mt-2px"},[a("GxIcon",{staticClass:"cursor-pointer mr-2",class:{"text-gray-300":!t.enableBack,"text-gray-black":t.enableBack},style:{fontSize:"25px"},attrs:{icon:"keyboard_arrow_left",title:"Settings"},on:{click:t.backYear}})],1),a("div",{staticClass:"text-center font-bold"},[t._v(" "+t._s(t.year)+" ")]),a("div",{staticClass:"flex-1 text-left mt-2px"},[a("GxIcon",{staticClass:"cursor-pointer ml-2",class:{"text-gray-300":!t.enableNext,"text-gray-black":t.enableNext},style:{fontSize:"25px"},attrs:{icon:"keyboard_arrow_right",title:"Settings"},on:{click:t.nextYear}})],1)]),a("div",{staticClass:"flex content-start flex-wrap  max-w-3xl pb-7"},t._l(t.months,(function(e){return a("HomeCalendarItem",{key:e.month,attrs:{disabled:t.disabledMonth(e.month),month:e,accountingFirmNumber:t.accountingFirmNumber,clientNumber:t.clientNumber},on:{showError:t.showError}})})),1),t.errorDescription?a("GxCardModal",{attrs:{headline:"Error al abrir el periodo",caption:t.errorDescription,"card-img":t.$utils.alertImages.Oops,alt:"Error",delayAnimation:""},scopedSlots:t._u([{key:"actions",fn:function(){return[a("div",{staticClass:"flex justify-center mt-4"},[a("GxButton",{on:{click:t.closeModel}},[t._v("ACEPTAR")])],1)]},proxy:!0}],null,!1,3694232332)}):t._e()],1):t._e()},o=[],n=(a("25f0"),a("5319"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"relative h-30 w-37 border p-3 ml-3 mb-4 rounded-lg shadow-2 cursor-pointer bg-white",class:{"hover:bg-gray-200 hover:shadow-3":!this.disabled},on:{mouseover:function(e){return t.mouseOver(!0)},mouseout:function(e){return t.mouseOver(!1)},click:t.onClick}},[a("div",{staticClass:"flex justify-between text-sm"},[a("div",{staticClass:"flex flex-col",class:{"text-black font-bold":!t.getStatusNotStarted,"text-gray-500":t.getStatusNotStarted}},[t._v(" "+t._s(t.month.name)+" ")]),a("div",{staticClass:"flex flex-col pt-px"},[a("GxIcon",{directives:[{name:"show",rawName:"v-show",value:this.hover,expression:"this.hover"}],staticClass:"cursor-pointer ml-2 text-gray-500",style:{fontSize:"16px"},attrs:{icon:"launch",title:"launch"}})],1)]),t.getStatusName?a("div",{staticClass:"mt-1 flex fixed text-2xs rounded-full pl-1 pt-px pb-px pr-1 font-bold",class:{"bg-gray-200 text-gray-500":"closed"===this.month.status,"bg-success text-white":"open"===this.month.status}},[t._v(" "+t._s(t.getStatusName)+" ")]):t._e(),t.getValidationStatus?a("div",{staticClass:"flex flex-col w-full absolute bottom-0 pb-3 items-end pr-6"},[a("GxIcon",{staticClass:"cursor-pointer ml-2 text-pending",style:{fontSize:"16px"},attrs:{icon:"flag",title:"launch"}})],1):t._e(),this.showOpenPeriod?a("div",{staticClass:"flex flex-col w-full absolute bottom-0 items-center text-center",on:{click:t.createPeriod}},[a("span",{staticClass:"flex flex-col mr-5 mb-4 h-6 w-28 pt-px pb-px border text-sm rounded-lg text-primary font-bold border-primary"},[t._v(" Iniciar per√≠odo")])]):t._e(),t.getStatusNotStarted&&!this.disabled?a("div",{staticClass:"flex flex-col w-full absolute bottom-0 text-right"},[a("span",{staticClass:"flex flex-col mr-5 mb-2 text-2xs font-bold text-gray-500"},[t._v("No iniciado")])]):t._e()])}),l=[],u=(a("e6cf"),a("0ae0")),d={name:"HomeCalendarItem",data(){return{hover:!1,showOpenPeriod:!1,errorDescription:""}},props:{month:{type:Object,default:null},disabled:{type:Boolean,default:!1},clientNumber:{type:String,default:null},accountingFirmNumber:{type:String,default:null}},computed:{getStatusName(){return"open"===this.month.status?"Abierto":"closed"===this.month.status?"Cerrado":""},getValidationStatus(){return"nothingPending"!==this.month.validationStatus&&""!==this.month.validationStatus},getStatusNotStarted(){return!this.showOpenPeriod&&!this.getStatusName}},methods:{mouseOver(t){this.getStatusName&&!this.disabled&&(this.hover=t),this.getStatusName||this.disabled||(this.showOpenPeriod=t)},mouseOut(t){this.hover=t,this.showOpenPeriod=t},async onClick(){"open"!==this.month.status&&"closed"!==this.month.status||(localStorage.setItem("periodDefault",this.month.periodId),this.$router.push({name:"journalEntriesView",params:{periodId:this.month.periodId}}))},async createPeriod(){if(!this.disabled)try{const t=await this.$apollo.mutate({mutation:u["u"],variables:{accountingFirmNumber:this.accountingFirmNumber,clientNumber:this.clientNumber,period:this.month.periodId}});null!==t.data.periodOpen.error&&null===t.data.periodOpen.period?(this.errorDescription=t.data.periodOpen.error.message+" - "+t.data.periodOpen.error.details.join(""),this.$emit("showError",this.errorDescription)):(this.showOpenPeriod=!1,this.month.status=t.data.periodOpen.period.status,this.month.validationStatus=t.data.periodOpen.period.validationStatus)}catch(t){this.$emit("showError",this.error)}}}},m=d,c=a("2877"),h=Object(c["a"])(m,n,l,!1,null,null,null),p=h.exports,b=a("4c6a"),x=a("0d9e"),g={name:"HomeCalendar",data(){return{searchPeriods:!0,year:(new Date).getFullYear(),months:[{periodId:Number(this.year+"01"),month:1,name:"Enero",status:"",validationStatus:""},{periodId:Number(this.year+"02"),month:2,name:"Febrero",status:"",validationStatus:""},{periodId:Number(this.year+"03"),month:3,name:"Marzo",status:"",validationStatus:""},{periodId:Number(this.year+"04"),month:4,name:"Abril",status:"",validationStatus:""},{periodId:Number(this.year+"05"),month:5,name:"Mayo",status:"",validationStatus:""},{periodId:Number(this.year+"06"),month:6,name:"Junio",status:"",validationStatus:""},{periodId:Number(this.year+"07"),month:7,name:"Julio",status:"",validationStatus:""},{periodId:Number(this.year+"08"),month:8,name:"Agosto",status:"",validationStatus:""},{periodId:Number(this.year+"09"),month:9,name:"Septiembre",status:"",validationStatus:""},{periodId:Number(this.year+"10"),month:10,name:"Octubre",status:"",validationStatus:""},{periodId:Number(this.year+"11"),month:11,name:"Noviembre",status:"",validationStatus:""},{periodId:Number(this.year+"12"),month:12,name:"Diciembre",status:"",validationStatus:""}],periods:null,beginningPeriod:null,clientNumber:null,accountingFirmNumber:null,errorDescription:null}},apollo:{myAccountingFirms:{query:b["v"],variables(){return{clientNumber:[localStorage.getItem("clientNumber")],year:this.year}},fetchPolicy:"no-cache"}},watch:{myAccountingFirms(t){t&&(this.clientNumber=t[0].clients[0].clientNumber,this.accountingFirmNumber=t[0].accountingFirmNumber,this.periods=t[0].clients[0].accounting.periods,this.beginningPeriod=t[0].clients[0].accounting.beginningPeriod,this.resetMonths(),this.fillMonths())},immediate:!0},components:{HomeCalendarItem:p,GxCardModal:x["a"]},computed:{enableNext(){return this.year<(new Date).getFullYear()},beginningYear(){return this.beginningPeriod.toString().substring(0,4)},enableBack(){return Number(this.beginningYear)<this.year}},methods:{nextYear(){this.enableNext&&this.year++},backYear(){this.enableBack&&this.year--},resetMonths(){this.months=[{periodId:Number(this.year+"01"),month:1,name:"Enero",status:"",validationStatus:""},{periodId:Number(this.year+"02"),month:2,name:"Febrero",status:"",validationStatus:""},{periodId:Number(this.year+"03"),month:3,name:"Marzo",status:"",validationStatus:""},{periodId:Number(this.year+"04"),month:4,name:"Abril",status:"",validationStatus:""},{periodId:Number(this.year+"05"),month:5,name:"Mayo",status:"",validationStatus:""},{periodId:Number(this.year+"06"),month:6,name:"Junio",status:"",validationStatus:""},{periodId:Number(this.year+"07"),month:7,name:"Julio",status:"",validationStatus:""},{periodId:Number(this.year+"08"),month:8,name:"Agosto",status:"",validationStatus:""},{periodId:Number(this.year+"09"),month:9,name:"Septiembre",status:"",validationStatus:""},{periodId:Number(this.year+"10"),month:10,name:"Octubre",status:"",validationStatus:""},{periodId:Number(this.year+"11"),month:11,name:"Noviembre",status:"",validationStatus:""},{periodId:Number(this.year+"12"),month:12,name:"Diciembre",status:"",validationStatus:""}]},fillMonths(){this.periods.forEach(t=>{let e=this.months.findIndex(e=>e.month===Number(t.periodId.replace(this.year.toString(),"")));this.months[e].status=t.status,this.months[e].validationStatus=t.validationStatus})},disabledMonth(t){let e=Number(this.year+(t>9?t:"0"+t).toString());return Number(this.beginningPeriod)>e},showError(t){this.errorDescription=t},closeModel(){this.errorDescription=""}}},f=g,v=Object(c["a"])(f,r,o,!1,null,null,null),y=v.exports,N={name:"HomeAccounting",page:{title:"Mi contabilidad",meta:[{name:"HomeAccounting",content:"HomeAccounting"}]},components:{HomeCalendar:y}},S=N,w=(a("413d"),Object(c["a"])(S,i,s,!1,null,null,null));e["default"]=w.exports},fc2f:function(t,e,a){}}]);
//# sourceMappingURL=chunk-202e34ba.bb0b7406.js.map