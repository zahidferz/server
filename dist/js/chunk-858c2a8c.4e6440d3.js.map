{"version":3,"sources":["webpack:///./src/router/views/Dashboard/UploadProfilePhotoView.vue?de55","webpack:///./src/components/Dashboard/UploadProfilePhoto.vue?6c46","webpack:///src/components/Dashboard/UploadProfilePhoto.vue","webpack:///./src/components/Dashboard/UploadProfilePhoto.vue?9787","webpack:///./src/components/Dashboard/UploadProfilePhoto.vue","webpack:///src/router/views/Dashboard/UploadProfilePhotoView.vue","webpack:///./src/router/views/Dashboard/UploadProfilePhotoView.vue?e05d","webpack:///./src/router/views/Dashboard/UploadProfilePhotoView.vue","webpack:///./src/components/Dashboard/UploadProfilePhoto.vue?2faf"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","goBack","staticRenderFns","$mq","staticClass","_v","profilePhoto","inputLabel","model","value","callback","$$v","imageSrc","expression","myAccount","image","_e","name","components","GxDesktopHeader","GxFileDragAndDrop","apollo","summaryImg","loading","computed","watch","newVal","$router","push","params","$refs","fileDropZone","enableFileDragAndDrop","methods","gxAnim","back","component","page","title","meta"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,kBAAkB,CAACE,MAAM,CAAC,MAAQ,uBAAuB,KAAO,qBAAqB,qBAAqBN,EAAIO,SAAS,CAACH,EAAG,uBAAuB,IACjPI,EAAkB,G,YCDlB,EAAS,WAAa,IAAIR,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,MAAoB,OAAZF,EAAIS,IAAcL,EAAG,MAAM,CAACM,YAAY,wDAAwD,CAACN,EAAG,IAAI,CAACM,YAAY,QAAQ,CAACV,EAAIW,GAAG,8EAA8EP,EAAG,oBAAoB,CAACE,MAAM,CAAC,iBAAiBN,EAAIY,aAAa,MAAQZ,EAAIa,YAAYC,MAAM,CAACC,MAAOf,EAAY,SAAEgB,SAAS,SAAUC,GAAMjB,EAAIkB,SAASD,GAAKE,WAAW,eAAe,GAAGf,EAAG,MAAM,CAACM,YAAY,yCAAyC,CAAEV,EAAa,UAAEI,EAAG,kBAAkB,CAACM,YAAY,aAAaJ,MAAM,CAAC,KAAO,qBAAqB,OAASN,EAAIoB,UAAUC,MAAQ,4BAA8B,uBAAuB,qBAAqBrB,EAAIO,UAAUP,EAAIsB,KAAKlB,EAAG,IAAI,CAACM,YAAY,cAAc,CAACV,EAAIW,GAAG,8EAA8EP,EAAG,OAAO,CAACM,YAAY,uDAAuD,CAACN,EAAG,oBAAoB,CAACE,MAAM,CAAC,iBAAiBN,EAAIY,aAAa,MAAQZ,EAAIa,YAAYC,MAAM,CAACC,MAAOf,EAAY,SAAEgB,SAAS,SAAUC,GAAMjB,EAAIkB,SAASD,GAAKE,WAAW,eAAe,IAAI,IACppC,EAAkB,G,0DCItB,OACEI,KAAM,qBACNC,WAAY,CACVC,gBAAJ,OACIC,kBAAJ,QAEEC,OAAQ,CACNP,UAAW,IAAf;;;;;;;;;;;;SAcE,OACE,MAAO,CAELF,SAAU,KACVU,WAAY,EAAlB,QACMC,SAAS,IAGbC,SAAU,CACR,eACE,OAAI7B,KAAKmB,WAAanB,KAAKmB,UAAUC,MAC5BpB,KAAKmB,UAAUC,MAEf,MAGX,aACE,OAAIpB,KAAKmB,WAAanB,KAAKmB,UAAUC,MAC5B,eAEF,cAET,4BACE,OAAIpB,KAAKW,aACA,qCACf,sBACA,8CAEa,gBAGXmB,MAAO,CACL,SAASC,GACP/B,KAAKgC,QAAQC,KAAK,CAChBX,KAAM,qBACNY,OAAQ,CAAhB,gBAIE,UACMlC,KAAKmC,MAAMC,cACbpC,KAAKqC,yBAGTC,QAAS,CAyGP,SACEtC,KAAKgC,QAAQO,OAAS,cACtBvC,KAAKgC,QAAQQ,UCjLwV,I,wBCQvWC,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,EAAAA,E,QChBf,GACEC,KAAM,CACJC,MAAO,uBACPC,KAAM,CAAC,CAAX,qDAEErB,WAAY,CAAd,6CACEe,QAAS,CACP,SACEtC,KAAKgC,QAAQC,KAAK,CAAxB,6CCX8X,ICO1X,EAAY,eACd,EACAnC,EACAS,GACA,EACA,KACA,KACA,MAIa,e,6CClBf,yBAAokB,EAAG,G","file":"js/chunk-858c2a8c.4e6440d3.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('LayoutWebMobile',{attrs:{\"title\":\"Subir foto de perfil\",\"icon\":\"keyboard_backspace\",\"icon-click-handler\":_vm.goBack}},[_c('UploadProfilePhoto')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.$mq === 'mo')?_c('div',{staticClass:\"flex-grow flex flex-col items-center p-4 text-center\"},[_c('p',{staticClass:\"mb-8\"},[_vm._v(\"Esta fotografía aparecerá en tu perfil, podrás cambiarla cuando quieras.\")]),_c('GxFileDragAndDrop',{attrs:{\"original-image\":_vm.profilePhoto,\"label\":_vm.inputLabel},model:{value:(_vm.imageSrc),callback:function ($$v) {_vm.imageSrc=$$v},expression:\"imageSrc\"}})],1):_c('div',{staticClass:\"flex-grow flex flex-col items-center \"},[(_vm.myAccount)?_c('GxDesktopHeader',{staticClass:\"self-start\",attrs:{\"icon\":\"keyboard_backspace\",\"header\":_vm.myAccount.image ? 'Actualizar foto de perfil' : 'Subir foto de perfil',\"icon-click-handler\":_vm.goBack}}):_vm._e(),_c('p',{staticClass:\"self-start\"},[_vm._v(\"Esta fotografía aparecerá en tu perfil, podrás cambiarla cuando quieras.\")]),_c('main',{staticClass:\"flex-grow flex-col flex justify-center items-center\"},[_c('GxFileDragAndDrop',{attrs:{\"original-image\":_vm.profilePhoto,\"label\":_vm.inputLabel},model:{value:(_vm.imageSrc),callback:function ($$v) {_vm.imageSrc=$$v},expression:\"imageSrc\"}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport gql from 'graphql-tag'\nimport GxDesktopHeader from '@components/_Core/Layout/GxDesktopHeader'\nimport GxFileDragAndDrop from '@components/_Core/GxFileDragAndDrop.vue'\n\nexport default {\n  name: 'UploadProfilePhoto',\n  components: {\n    GxDesktopHeader,\n    GxFileDragAndDrop,\n  },\n  apollo: {\n    myAccount: gql`\n      {\n        myAccount {\n          image\n          userNumber\n          companies {\n            company {\n              companyNumber\n            }\n          }\n        }\n      }\n    `,\n  },\n  data() {\n    return {\n      // draggingFile: false,\n      imageSrc: null,\n      summaryImg: require('@assets/images/Signup/InitialTodos/mo_001_7_certificados.svg'),\n      loading: false,\n    }\n  },\n  computed: {\n    profilePhoto() {\n      if (this.myAccount && this.myAccount.image) {\n        return this.myAccount.image\n      } else {\n        return null\n      }\n    },\n    inputLabel() {\n      if (this.myAccount && this.myAccount.image) {\n        return 'CAMBIAR FOTO'\n      }\n      return 'SUBIR FOTO'\n    },\n    imageInputContainerStyles() {\n      if (this.profilePhoto) {\n        return `z-index: 0; background-image: url(${\n          this.profilePhoto\n        }?${new Date().getTime()}); filter: opacity(0.2);`\n      }\n      return `z-index: 0;`\n    },\n  },\n  watch: {\n    imageSrc(newVal) {\n      this.$router.push({\n        name: 'resizeprofilephoto',\n        params: { imageSrc: newVal },\n      })\n    },\n  },\n  mounted() {\n    if (this.$refs.fileDropZone) {\n      this.enableFileDragAndDrop()\n    }\n  },\n  methods: {\n    // enableFileDragAndDrop() {\n    //   const draggingFileOn = function(evt) {\n    //     evt.preventDefault()\n    //     evt.stopPropagation()\n    //     this.draggingFile = true\n    //   }.bind(this)\n    //   const draggingFileOff = function(evt) {\n    //     evt.preventDefault()\n    //     evt.stopPropagation()\n    //     this.draggingFile = false\n    //   }.bind(this)\n    //   const handleFileDrop = function(evt) {\n    //     evt.preventDefault()\n    //     evt.stopPropagation()\n    //     this.draggingFile = false\n    //     console.log(evt)\n    //     this.parseFile(evt.dataTransfer.files[0])\n    //   }.bind(this)\n    //   this.$refs.fileDropZone.addEventListener('dragenter', draggingFileOn)\n    //   this.$refs.fileDropZone.addEventListener('dragover', draggingFileOn)\n    //   this.$refs.fileDropZone.addEventListener('dragleave', draggingFileOff)\n    //   this.$refs.fileDropZone.addEventListener('drop', handleFileDrop)\n\n    //   this.$once('hook:beforeDestroy', () => {\n    //     this.$refs.fileDropZone.removeEventListener('dragenter', draggingFileOn)\n    //     this.$refs.fileDropZone.removeEventListener('dragover', draggingFileOn)\n    //     this.$refs.fileDropZone.removeEventListener(\n    //       'dragleave',\n    //       draggingFileOff\n    //     )\n    //     this.$refs.fileDropZone.removeEventListener('drop', handleFileDrop)\n    //   })\n    // },\n    // compress(file) {\n    //   const fileName = file.name\n    //   const reader = new FileReader()\n    //   reader.readAsDataURL(file)\n    //   reader.onload = (event) => {\n    //     const img = new Image()\n    //     img.src = event.target.result\n    //     img.onload = () => {\n    //       const maxWidth = 350 // Max width for the image\n    //       const maxHeight = 350\n    //       let ratio = 1\n    //       let widthRatio\n    //       let heightRatio\n    //       if (img.width > maxWidth) {\n    //         widthRatio = maxWidth / img.width\n    //       }\n    //       if (img.height > maxHeight) {\n    //         heightRatio = maxHeight / img.height\n    //       }\n    //       // original image width && height < 350px\n    //       if (widthRatio && heightRatio) {\n    //         ratio = widthRatio < heightRatio ? widthRatio : heightRatio\n    //       }\n    //       // Set new width and height based on required ratios\n    //       // const width = 100;\n    //       // const height = 100;\n    //       const width = ratio * img.width\n    //       const height = ratio * img.height\n    //       const elem = document.createElement('canvas')\n    //       elem.width = width\n    //       elem.height = height\n    //       const ctx = elem.getContext('2d')\n    //       // img.width and img.height will contain the original dimensions\n    //       ctx.drawImage(img, 0, 0, width, height)\n    //       ctx.canvas.toBlob(\n    //         (blob) => {\n    //           const file = new File([blob], fileName, {\n    //             type: 'image/png',\n    //             lastModified: Date.now(),\n    //           })\n    //           var reader = new FileReader()\n    //           reader.onloadend = (evt) => {\n    //             this.imageSrc = reader.result\n    //             this.$router.push({\n    //               name: 'resizeprofilephoto',\n    //               params: { imageSrc: this.imageSrc },\n    //             })\n    //           }\n    //           reader.readAsDataURL(file)\n    //         },\n    //         'image/png',\n    //         1\n    //       )\n    //     }\n    //     // reader.onerror = (error) => console.log(error)\n    //   }\n    // },\n    // loadFile(input) {\n    //   this.parseFile(input.target.files[0])\n    // },\n    // parseFile(file) {\n    //   this.compress(file)\n\n    //   var reader = new FileReader()\n    //   reader.onloadend = () => {\n    //     console.log('Image src updated')\n    //     this.imageSrc = reader.result\n    //     console.log(this.imageSrc)\n    //   }\n    //   reader.readAsDataURL(file)\n    // },\n    goBack() {\n      this.$router.gxAnim = 'slide-right'\n      this.$router.back()\n    },\n  },\n}\n</script>\n<template>\n  <div\n    v-if=\"$mq === 'mo'\"\n    class=\"flex-grow flex flex-col items-center p-4 text-center\"\n  >\n    <p class=\"mb-8\"\n      >Esta fotografía aparecerá en tu perfil, podrás cambiarla cuando\n      quieras.</p\n    >\n    <GxFileDragAndDrop\n      v-model=\"imageSrc\"\n      :original-image=\"profilePhoto\"\n      :label=\"inputLabel\"\n    />\n    <!-- <div\n      class=\"mb-2 w-64 h-64 border border-primary flex justify-center items-center rounded-lg\"\n    > -->\n    <!-- <div\n        class=\"absolute mb-2 w-50 h-50 flex justify-center items-center rounded-lg bg-center bg-contain bg-no-repeat pointer-events-none\"\n        :style=\"imageInputContainerStyles\"\n      ></div>\n      <input\n        id=\"croppieFileInput\"\n        data-testid=\"uploadlogofileinput\"\n        name=\"croppieFileInput\"\n        type=\"file\"\n        @change=\"loadFile\"\n      />\n      <label\n        class=\"text-h3 text-primary flex flex-col justify-center items-center w-50 h-50 border border-dashed border-primary rounded-lg\"\n        for=\"croppieFileInput\"\n      >\n        <GxIcon icon=\"cloud_upload\" />\n        <span class=\"gx-h6\">{{ inputLabel }}</span>\n      </label> -->\n    <!-- </div> -->\n  </div>\n  <div v-else class=\"flex-grow flex flex-col items-center \">\n    <GxDesktopHeader\n      v-if=\"myAccount\"\n      class=\"self-start\"\n      icon=\"keyboard_backspace\"\n      :header=\"\n        myAccount.image ? 'Actualizar foto de perfil' : 'Subir foto de perfil'\n      \"\n      :icon-click-handler=\"goBack\"\n    >\n    </GxDesktopHeader>\n    <p class=\"self-start\"\n      >Esta fotografía aparecerá en tu perfil, podrás cambiarla cuando\n      quieras.</p\n    >\n    <main class=\"flex-grow flex-col flex justify-center items-center\">\n      <GxFileDragAndDrop\n        v-model=\"imageSrc\"\n        :original-image=\"profilePhoto\"\n        :label=\"inputLabel\"\n      />\n      <!-- <div\n        ref=\"fileDropZone\"\n        class=\"relative mb-2 w-64 h-64 border border-primary flex justify-center items-center rounded-lg\"\n        :class=\"{\n          fileDropZone: draggingFile,\n        }\"\n      >\n        <div\n          class=\"absolute mb-2 w-50 h-50 flex justify-center items-center rounded-lg bg-center bg-contain bg-no-repeat pointer-events-none\"\n          :style=\"imageInputContainerStyles\"\n        >\n        </div>\n        <input\n          id=\"croppieFileInput\"\n          data-testid=\"uploadlogofileinput\"\n          name=\"croppieFileInput\"\n          type=\"file\"\n          @change=\"loadFile\"\n        />\n        <label\n          class=\"text-h3 cursor-pointer text-primary flex flex-col justify-center items-center w-50 h-50 border border-dashed border-primary rounded-lg\"\n          for=\"croppieFileInput\"\n        >\n          <GxIcon icon=\"cloud_upload\" />\n          <span class=\"gx-h6\">{{ inputLabel }}</span>\n        </label>\n      </div> -->\n    </main>\n  </div>\n</template>\n<style lang=\"scss\" scoped>\n// #croppieFileInput {\n//   position: absolute;\n//   z-index: -1;\n//   width: 0.1px;\n//   height: 0.1px;\n//   overflow: hidden;\n//   opacity: 0;\n// }\n// .fileDropZone::before {\n//   position: absolute;\n//   content: '';\n//   width: 100%;\n//   height: 100%;\n//   background: var(--secondary);\n//   opacity: 0.1;\n// }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadProfilePhoto.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadProfilePhoto.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UploadProfilePhoto.vue?vue&type=template&id=06c4bb32&scoped=true&\"\nimport script from \"./UploadProfilePhoto.vue?vue&type=script&lang=js&\"\nexport * from \"./UploadProfilePhoto.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UploadProfilePhoto.vue?vue&type=style&index=0&id=06c4bb32&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"06c4bb32\",\n  null\n  \n)\n\nexport default component.exports","<script>\nimport LayoutWebMobile from '@layouts/LayoutWebMobile'\nimport UploadProfilePhoto from '@components/Dashboard/UploadProfilePhoto'\nexport default {\n  page: {\n    title: 'Subir foto de perfil',\n    meta: [{ name: 'description', content: 'Subir foto de perfil' }],\n  },\n  components: { LayoutWebMobile, UploadProfilePhoto },\n  methods: {\n    goBack() {\n      this.$router.push({ name: 'dashboard', query: { drawerRight: true } })\n    },\n  },\n}\n</script>\n\n<template>\n  <LayoutWebMobile\n    title=\"Subir foto de perfil\"\n    icon=\"keyboard_backspace\"\n    :icon-click-handler=\"goBack\"\n  >\n    <UploadProfilePhoto />\n  </LayoutWebMobile>\n</template>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadProfilePhotoView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadProfilePhotoView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UploadProfilePhotoView.vue?vue&type=template&id=79d68ec4&\"\nimport script from \"./UploadProfilePhotoView.vue?vue&type=script&lang=js&\"\nexport * from \"./UploadProfilePhotoView.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadProfilePhoto.vue?vue&type=style&index=0&id=06c4bb32&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadProfilePhoto.vue?vue&type=style&index=0&id=06c4bb32&lang=scss&scoped=true&\""],"sourceRoot":""}