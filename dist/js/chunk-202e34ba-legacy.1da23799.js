(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-202e34ba"],{"413d":function(t,e,a){"use strict";var n=a("fc2f"),i=a.n(n);i.a},"6d04":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ml-15"},[a("h2",{staticClass:"mb-4 font-bold uppercase gx-caption"},[t._v("Mi contabilidad")]),a("div",{staticClass:"flex flex-col items-center content-center w-full "},[a("HomeCalendar")],1)])},i=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.myAccountingFirms?a("div",{staticClass:"flex flex-col min-h-0 w-50 rounded-lg shadow-2 pl-2 border w-full max-w-2xl bg-calendar-background"},[a("div",{staticClass:"flex flex-row items-stretch text-black content-center max-w-2xl text-xl mt-3"},[a("div",{staticClass:"flex-1 text-right mt-2px"},[a("GxIcon",{staticClass:"cursor-pointer mr-2",class:{"text-gray-300":!t.enableBack,"text-gray-black":t.enableBack},style:{fontSize:"25px"},attrs:{icon:"keyboard_arrow_left",title:"Settings"},on:{click:t.backYear}})],1),a("div",{staticClass:"text-center font-bold"},[t._v(" "+t._s(t.year)+" ")]),a("div",{staticClass:"flex-1 text-left mt-2px"},[a("GxIcon",{staticClass:"cursor-pointer ml-2",class:{"text-gray-300":!t.enableNext,"text-gray-black":t.enableNext},style:{fontSize:"25px"},attrs:{icon:"keyboard_arrow_right",title:"Settings"},on:{click:t.nextYear}})],1)]),a("div",{staticClass:"flex content-start flex-wrap  max-w-3xl pb-7"},t._l(t.months,(function(e){return a("HomeCalendarItem",{key:e.month,attrs:{disabled:t.disabledMonth(e.month),month:e,accountingFirmNumber:t.accountingFirmNumber,clientNumber:t.clientNumber},on:{showError:t.showError}})})),1),t.errorDescription?a("GxCardModal",{attrs:{headline:"Error al abrir el periodo",caption:t.errorDescription,"card-img":t.$utils.alertImages.Oops,alt:"Error",delayAnimation:""},scopedSlots:t._u([{key:"actions",fn:function(){return[a("div",{staticClass:"flex justify-center mt-4"},[a("GxButton",{on:{click:t.closeModel}},[t._v("ACEPTAR")])],1)]},proxy:!0}],null,!1,3694232332)}):t._e()],1):t._e()},o=[],s=(a("c740"),a("4160"),a("a9e3"),a("d3b7"),a("ac1f"),a("25f0"),a("5319"),a("159b"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"relative h-30 w-37 border p-3 ml-3 mb-4 rounded-lg shadow-2 cursor-pointer bg-white",class:{"hover:bg-gray-200 hover:shadow-3":!this.disabled},on:{mouseover:function(e){return t.mouseOver(!0)},mouseout:function(e){return t.mouseOver(!1)},click:t.onClick}},[a("div",{staticClass:"flex justify-between text-sm"},[a("div",{staticClass:"flex flex-col",class:{"text-black font-bold":!t.getStatusNotStarted,"text-gray-500":t.getStatusNotStarted}},[t._v(" "+t._s(t.month.name)+" ")]),a("div",{staticClass:"flex flex-col pt-px"},[a("GxIcon",{directives:[{name:"show",rawName:"v-show",value:this.hover,expression:"this.hover"}],staticClass:"cursor-pointer ml-2 text-gray-500",style:{fontSize:"16px"},attrs:{icon:"launch",title:"launch"}})],1)]),t.getStatusName?a("div",{staticClass:"mt-1 flex fixed text-2xs rounded-full pl-1 pt-px pb-px pr-1 font-bold",class:{"bg-gray-200 text-gray-500":"closed"===this.month.status,"bg-success text-white":"open"===this.month.status}},[t._v(" "+t._s(t.getStatusName)+" ")]):t._e(),t.getValidationStatus?a("div",{staticClass:"flex flex-col w-full absolute bottom-0 pb-3 items-end pr-6"},[a("GxIcon",{staticClass:"cursor-pointer ml-2 text-pending",style:{fontSize:"16px"},attrs:{icon:"flag",title:"launch"}})],1):t._e(),this.showOpenPeriod?a("div",{staticClass:"flex flex-col w-full absolute bottom-0 items-center text-center",on:{click:t.createPeriod}},[a("span",{staticClass:"flex flex-col mr-5 mb-4 h-6 w-28 pt-px pb-px border text-sm rounded-lg text-primary font-bold border-primary"},[t._v(" Iniciar per√≠odo")])]):t._e(),t.getStatusNotStarted&&!this.disabled?a("div",{staticClass:"flex flex-col w-full absolute bottom-0 text-right"},[a("span",{staticClass:"flex flex-col mr-5 mb-2 text-2xs font-bold text-gray-500"},[t._v("No iniciado")])]):t._e()])}),l=[],u=(a("a15b"),a("96cf"),a("1da1")),c=a("0ae0"),d={name:"HomeCalendarItem",data:function(){return{hover:!1,showOpenPeriod:!1,errorDescription:""}},props:{month:{type:Object,default:null},disabled:{type:Boolean,default:!1},clientNumber:{type:String,default:null},accountingFirmNumber:{type:String,default:null}},computed:{getStatusName:function(){return"open"===this.month.status?"Abierto":"closed"===this.month.status?"Cerrado":""},getValidationStatus:function(){return"nothingPending"!==this.month.validationStatus&&""!==this.month.validationStatus},getStatusNotStarted:function(){return!this.showOpenPeriod&&!this.getStatusName}},methods:{mouseOver:function(t){this.getStatusName&&!this.disabled&&(this.hover=t),this.getStatusName||this.disabled||(this.showOpenPeriod=t)},mouseOut:function(t){this.hover=t,this.showOpenPeriod=t},onClick:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:"open"!==t.month.status&&"closed"!==t.month.status||(localStorage.setItem("periodDefault",t.month.periodId),t.$router.push({name:"journalEntriesView",params:{periodId:t.month.periodId}}));case 1:case"end":return e.stop()}}),e)})))()},createPeriod:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.disabled){e.next=11;break}return e.prev=1,e.next=4,t.$apollo.mutate({mutation:c["u"],variables:{accountingFirmNumber:t.accountingFirmNumber,clientNumber:t.clientNumber,period:t.month.periodId}});case 4:a=e.sent,null!==a.data.periodOpen.error&&null===a.data.periodOpen.period?(t.errorDescription=a.data.periodOpen.error.message+" - "+a.data.periodOpen.error.details.join(""),t.$emit("showError",t.errorDescription)):(t.showOpenPeriod=!1,t.month.status=a.data.periodOpen.period.status,t.month.validationStatus=a.data.periodOpen.period.validationStatus),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),t.$emit("showError",t.error);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))()}}},m=d,h=a("2877"),p=Object(h["a"])(m,s,l,!1,null,null,null),b=p.exports,f=a("4c6a"),x=a("0d9e"),g={name:"HomeCalendar",data:function(){return{searchPeriods:!0,year:(new Date).getFullYear(),months:[{periodId:Number(this.year+"01"),month:1,name:"Enero",status:"",validationStatus:""},{periodId:Number(this.year+"02"),month:2,name:"Febrero",status:"",validationStatus:""},{periodId:Number(this.year+"03"),month:3,name:"Marzo",status:"",validationStatus:""},{periodId:Number(this.year+"04"),month:4,name:"Abril",status:"",validationStatus:""},{periodId:Number(this.year+"05"),month:5,name:"Mayo",status:"",validationStatus:""},{periodId:Number(this.year+"06"),month:6,name:"Junio",status:"",validationStatus:""},{periodId:Number(this.year+"07"),month:7,name:"Julio",status:"",validationStatus:""},{periodId:Number(this.year+"08"),month:8,name:"Agosto",status:"",validationStatus:""},{periodId:Number(this.year+"09"),month:9,name:"Septiembre",status:"",validationStatus:""},{periodId:Number(this.year+"10"),month:10,name:"Octubre",status:"",validationStatus:""},{periodId:Number(this.year+"11"),month:11,name:"Noviembre",status:"",validationStatus:""},{periodId:Number(this.year+"12"),month:12,name:"Diciembre",status:"",validationStatus:""}],periods:null,beginningPeriod:null,clientNumber:null,accountingFirmNumber:null,errorDescription:null}},apollo:{myAccountingFirms:{query:f["v"],variables:function(){return{clientNumber:[localStorage.getItem("clientNumber")],year:this.year}},fetchPolicy:"no-cache"}},watch:{myAccountingFirms:function(t){t&&(this.clientNumber=t[0].clients[0].clientNumber,this.accountingFirmNumber=t[0].accountingFirmNumber,this.periods=t[0].clients[0].accounting.periods,this.beginningPeriod=t[0].clients[0].accounting.beginningPeriod,this.resetMonths(),this.fillMonths())},immediate:!0},components:{HomeCalendarItem:b,GxCardModal:x["a"]},computed:{enableNext:function(){return this.year<(new Date).getFullYear()},beginningYear:function(){return this.beginningPeriod.toString().substring(0,4)},enableBack:function(){return Number(this.beginningYear)<this.year}},methods:{nextYear:function(){this.enableNext&&this.year++},backYear:function(){this.enableBack&&this.year--},resetMonths:function(){this.months=[{periodId:Number(this.year+"01"),month:1,name:"Enero",status:"",validationStatus:""},{periodId:Number(this.year+"02"),month:2,name:"Febrero",status:"",validationStatus:""},{periodId:Number(this.year+"03"),month:3,name:"Marzo",status:"",validationStatus:""},{periodId:Number(this.year+"04"),month:4,name:"Abril",status:"",validationStatus:""},{periodId:Number(this.year+"05"),month:5,name:"Mayo",status:"",validationStatus:""},{periodId:Number(this.year+"06"),month:6,name:"Junio",status:"",validationStatus:""},{periodId:Number(this.year+"07"),month:7,name:"Julio",status:"",validationStatus:""},{periodId:Number(this.year+"08"),month:8,name:"Agosto",status:"",validationStatus:""},{periodId:Number(this.year+"09"),month:9,name:"Septiembre",status:"",validationStatus:""},{periodId:Number(this.year+"10"),month:10,name:"Octubre",status:"",validationStatus:""},{periodId:Number(this.year+"11"),month:11,name:"Noviembre",status:"",validationStatus:""},{periodId:Number(this.year+"12"),month:12,name:"Diciembre",status:"",validationStatus:""}]},fillMonths:function(){var t=this;this.periods.forEach((function(e){var a=t.months.findIndex((function(a){return a.month===Number(e.periodId.replace(t.year.toString(),""))}));t.months[a].status=e.status,t.months[a].validationStatus=e.validationStatus}))},disabledMonth:function(t){var e=Number(this.year+(t>9?t:"0"+t).toString());return Number(this.beginningPeriod)>e},showError:function(t){this.errorDescription=t},closeModel:function(){this.errorDescription=""}}},v=g,y=Object(h["a"])(v,r,o,!1,null,null,null),N=y.exports,S={name:"HomeAccounting",page:{title:"Mi contabilidad",meta:[{name:"HomeAccounting",content:"HomeAccounting"}]},components:{HomeCalendar:N}},w=S,I=(a("413d"),Object(h["a"])(w,n,i,!1,null,null,null));e["default"]=I.exports},fc2f:function(t,e,a){}}]);
//# sourceMappingURL=chunk-202e34ba-legacy.1da23799.js.map