(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ad0f45f"],{"312f":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("LayoutWebMobile",{attrs:{icon:"keyboard_backspace",title:e.title,"icon-click-handler":e.goBack,"has-drawer":"de"===e.$mq}},[a("SendSos")],1)},o=[],r=a("42b5"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex-grow flex flex-col"},[a("MqLayout",{staticClass:"flex",attrs:{mq:"de"}},[a("nav",{staticClass:"gx-h4 flex items-center"},[a("GxIcon",{staticClass:"mr-4 cursor-pointer",attrs:{icon:"keyboard_backspace"},on:{click:e.goBack}}),a("h1",{staticClass:"de:gx-h4 font-bold"},[e._v(e._s(e.title))])],1)]),a("div",{staticClass:"flex p-4 de:mx-auto de:mt-32 de:p-8 de:shadow-3 de:relative de:rounded-lg de:w-108"},[e.loadingGraphQL?a("GxLoader"):a("GxForm",{staticClass:"flex-grow flex flex-col",on:{submit:e.onSubmit}},[e.myAccount?a("GxTextFieldName",{staticClass:"mb-2",attrs:{label:"Nombre",required:"","left-icon":"face",error:e.nameError},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}):e._e(),a("GxTextFieldEmail",{attrs:{required:"",label:"Correo Electrónico",error:e.emailError,name:"Correo Electrónico"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("p",{staticClass:"mb-4 de:mb-8 de:mt-4 mt-8 de:gx-caption gx-caption text-center"},[e._v("Tu información está protegida. "),a("GxTextLink",{attrs:{"target-blank":"",to:{name:"privacypolicy"}}},[e._v("Conoce cómo.")])],1),a("div",{staticClass:"flex-grow flex flex-col justify-end items-center mx-auto"},[e.customError?a("p",{staticClass:"mb-2 text-alert"},[e._v(e._s(e.customError))]):e._e(),a("GxButton",{attrs:{loading:e.loading,"loading-success":e.loadingSuccess,type:"submit"}},[e._v(" Enviar S.O.S ")])],1)],1),e.showSosSuccessAlert?a("GxCardModal",{attrs:{headline:"S.O.S enviado","text-body":"Te notificaremos cuando tu información esté actualizada.","card-img":e.$utils.alertImages.Done,alt:"Email de ayuda enviado."},on:{close:e.closeModalSuccess,click:e.closeModalSuccess}}):e._e(),e.customError&&e.sendSosMailModal?a("GxCardModal",{key:"errorModal",attrs:{headline:e.customError,"card-img":e.$utils.alertImages.Dissapointed},on:{close:function(t){return e.$router.push({name:"dashboard"})},click:function(t){return e.$router.push({name:"dashboard"})}}}):e._e(),e.sendSosMailModal&&!e.customError?a("GxCardModal",{key:"sendSOSModal",attrs:{headline:"Ya tenemos el correo de tu contador","card-img":e.$utils.alertImages.Question,alt:"Ya tenemos el correo de tu contador"},scopedSlots:e._u([{key:"body",fn:function(){return[a("p",{staticClass:"mb-8 mt-4 text-black de:text-center"},[e._v(e._s(e.sendSosBody)+" "),a("span",{staticClass:"font-bold"},[e._v(e._s(e.sendEmailTo))])])]},proxy:!0},{key:"actions",fn:function(){return[a("div",{staticClass:"flex justify-end de:justify-center de:mt-8"},[a("GxButton",{staticClass:"text-alert mr-4 de:border-alert",attrs:{plain:"mo"===e.$mq,ghost:"de"===e.$mq,disabled:e.loading},on:{click:function(t){e.sendSosMailModal=!1}}},[e._v("cambiarlo")]),a("GxButton",{attrs:{plain:"mo"===e.$mq,loading:e.loading,"loading-success":e.loadingSuccess},on:{click:e.onSubmit}},[e._v("confirmar")])],1)]},proxy:!0}],null,!1,3532300989)}):e._e()],1)],1)},l=[],n=(a("e6cf"),a("51b4")),c=a("0d9e"),u=a("524e"),d=a("9530"),m=a.n(d),h=a("0ae0");let f,p=e=>e;var b={name:"SendSos",components:{GxLoader:n["a"],GxCardModal:c["a"],GxIcon:u["a"]},apollo:{myAccount:m()(f||(f=p`
      {
        myAccount {
          userNumber
          email
          companies {
            company {
              companyNumber
              users(where: { jobTitle: "Contador" }) {
                user {
                  userNumber
                  email
                  userCompleteName
                }
              }
            }
          }
        }
      }
    `))},data(){return{name:"",nameError:null,emailError:null,email:"",timeout:null,invalidName:!0,invalidEmail:!0,hasError:!1,customError:"",customErrorName:"",customErrorEmail:"",showSosSuccessAlert:!1,sosSuccessAlertImg:a("4332"),sendSosMailModal:!1,emailConfirmationAlertImg:a("909f"),loading:!1,loadingSuccess:!1}},computed:{sendSosBody(){return"Enviaremos la solicitud de ayuda a: "},sendEmailTo(){return""+this.email},loadingGraphQL(){return!!this.$apollo&&this.$apollo.queries.myAccount.loading},title(){return"contador"===this.$route.query.r?"Escribe la información de tu equipo":"Escribe la información de tu contador"}},watch:{myAccount:{handler:function(e){e&&this.getMyAccountData(e)},immediate:!0},name(){this.hasError=!1,this.nameError="",this.customError=""},email(){this.hasError=!1,this.emailError="",this.customError=""}},created(){"contador"===this.$route.query.r&&(this.sendSosMailModal=!1)},methods:{getMyAccountData(e){const t=e.companies[0].company.users;if(0===t.length||t[0].user.email===this.myAccount.email)return void(this.sendSosMailModal=!1);const a=t[0];this.email=a.user.email,this.name=a.user.userCompleteName,this.sendSosMailModal=!0},async onSubmit(){try{this.loading=!0,await this.$apollo.mutate({mutation:h["SEND_SOS_MAIL"],variables:{companyNumber:this.myAccount.companies[0].company.companyNumber,email:this.email}}),this.loading=!1,this.loadingSuccess=!0,this.showSosSuccessAlert=!0,this.timeout=setTimeout(()=>{this.closeModalSuccess()},3e3)}catch(e){this.loading=!1,this.customError=this.$utils.parseServerError(e)}},closeModalSuccess(){this.timeout&&clearTimeout(this.timeout),this.$router.push({name:"dashboard"})},goBack(){this.$router.gxAnim="slide-right",this.$router.back()}}},g=b,x=a("2877"),S=Object(x["a"])(g,i,l,!1,null,null,null),y=S.exports,w={page:{title:"Enviar SOS",meta:[{name:"description",content:"Enviar SOS"}]},components:{LayoutWebMobile:r["a"],SendSos:y},data(){return{title:"Escribe la info de tu contador"}},mounted(){"contador"===this.$route.query.r&&(this.title="Escribe la info de tu equipo")},methods:{goBack(){this.$router.back()}}},C=w,v=Object(x["a"])(C,s,o,!1,null,null,null);t["default"]=v.exports},"42b5":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return"mo"===e.$mq?a("MqLayout",{key:"layout",staticClass:"flex flex-col bg-white",attrs:{id:"layout",mq:"mo"}},[a("header",{key:"topbar-container",staticClass:"sticky top-0 z-20 bg-white top-bar",class:{"shadow-5":e.tabs,"shadow-3":e.hasScrolled}},[a("transition",{key:"default-transition",attrs:{name:"input-fade",mode:"out-in"},on:{"after-enter":e.focusMobileSearch}},[e.mobileSearch?a("nav",{key:"search-container",staticClass:"flex items-center p-4 h-14 justify-left gx-h5",class:[e.onSearchClasses]},[a("button",{staticClass:"flex items-center mr-4 leading-none focus:outline-none"},[a("GxIcon",{attrs:{icon:"close"},on:{click:function(t){return t.stopPropagation(),e.cancelMobileSearch(t)}}})],1),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.search,expression:"search",modifiers:{trim:!0}}],ref:"mobileSearch",staticClass:"w-full leading-none bg-transparent focus:outline-none gxMobileSearchInput",class:e.placeholderColor,attrs:{placeholder:e.placeholder,autofocus:"",type:"search"},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]):a("nav",{key:"default-topbar",staticClass:"flex justify-start w-full p-4 h-14 items-bottom"},[!e.mobileSearch&&e.breadcrumb?a("GxBreadcrumb",{key:"GxBreadcrumb",attrs:{classes:e.hasScrolled?e.breadcrumbClassesWithScroll:e.breadcrumbClassesWithoutScroll,"has-scrolled":e.hasScrolled}},[a("h1",{staticClass:"font-bold gx-h5"},[e._v(e._s(e.title))])]):e._e(),e.mobileSearch||e.breadcrumb?e._e():a("h1",{key:"title-container",staticClass:"flex items-center font-bold justy-left items-bottom gx-h5"},[e.iconClickHandler?a("GxIcon",{staticClass:"mr-4",class:[e.iconClasses],staticStyle:{"font-size":"20px"},attrs:{icon:e.icon,"html-tag":"button"},on:{click:function(t){return t.stopPropagation(),e.iconClickHandler(t)}}}):e.hasDrawer&&!e.iconClickHandler?a("GxIcon",{staticClass:"mr-4",class:[e.iconClasses],staticStyle:{"font-size":"20px"},attrs:{icon:e.icon,"html-tag":"button"},on:{click:function(t){t.stopPropagation(),e.drawerLeft=!e.drawerLeft}}}):a("GxIcon",{staticClass:"mr-4",class:[e.iconClasses],staticStyle:{"font-size":"20px"},attrs:{icon:e.icon}}),e._t("title",[a("span",[e._v(" "+e._s(e.title)+" ")])])],2),a("div",{key:"right-icons",staticClass:"flex items-center ml-auto gx-h5"},[e._t("topbar-right"),e.hasSearch?a("GxIcon",{key:"search-icon",staticClass:"leading-none icon-button focus:outline-none",attrs:{"html-tag":"button",icon:"search"},on:{click:function(t){e.mobileSearch=!0}}}):e._e(),e.hasDrawerRight?a("GxIcon",{key:"right-drawer",staticClass:"ml-4 leading-none icon-button",attrs:{"html-tag":"button",icon:"more_vert"},on:{click:function(t){e.drawerRight=!e.drawerRight}}}):e._e()],2)],1)]),e._t("header2"),e.tabs?a("div",{key:"tabs-container"},[e._t("tabs")],2):e._e()],2),e.hasDrawer?a("TopBarLeftDrawer",{key:"TopBarLeftDrawer",attrs:{open:e.drawerLeft,"a-drawer-open":e.drawerOPen},on:{open:function(t){e.drawerOPen=!0},close:function(t){return e.onCloseDrawer("drawerLeft")}}}):e._e(),e.hasDrawerRight?a("TopBarRightDrawer",{key:"TopBarRightDrawer",attrs:{open:e.drawerRight,"a-drawer-open":e.drawerOPen},on:{open:function(t){e.drawerOPen=!0},close:function(t){return e.onCloseDrawer("drawerRight")}}}):e._e(),a("div",{staticClass:"flex flex-col flex-grow",class:{"gx-padding-menu pb-14":e.withPaddingBottom},attrs:{id:"mobileMainContent"}},[e._t("default",null,null,{hasScrolled:e.hasScrolled,search:e.search})],2)],1):a("div",{staticClass:"flex flex-col flex-grow",class:{"pb-4":e.withPaddingBottom}},[e._t("default")],2)},o=[],r=(a("cca6"),a("2532"),a("5319"),a("841c"),a("524e")),i=a("f21d"),l=a("6f0d"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",{staticClass:"flex-grow flex justify-start"},[a("RouterLink",{staticClass:"flex justify-start items-center gx-h5",attrs:{tag:"li",to:{name:"dashboard"}}},[a("GxIcon",{class:[e.classes.icon],attrs:{icon:"dashboard"}}),a("GxIcon",{staticClass:"gxNext mx-1",class:[e.classes.next],attrs:{icon:"navigate_next"}})],1),e._l(e.matchedRoutes,(function(t,s){return a("RouterLink",{key:t.name,staticClass:"flex justify-start items-center  gx-h5",attrs:{tag:"li",to:{name:t.name}}},[t.meta.icon?[a("GxIcon",{class:[t.name===e.$route.name||t.redirect.name===e.$route.name?e.classes.active:e.classes.icon],attrs:{icon:t.meta.icon}}),s!==e.matchedRoutes.length-1&&e.matchedRoutes[s+1].meta.icon?a("GxIcon",{staticClass:"mx-1  gxNext",class:[e.classes.next],attrs:{icon:"navigate_next"}}):e._e()]:e._e()],2)})),a("div",{staticClass:"ml-4 title"},[e._t("default")],2)],2)},c=[],u=(a("fb6a"),{name:"GxBreadcrumb",components:{GxIcon:r["a"]},props:{hasScrolled:{type:Boolean,default:!1},classes:{type:Object,default:null}},computed:{matchedRoutes(){return this.$route.matched.slice(1)}}}),d=u,m=(a("8e44"),a("2877")),h=Object(m["a"])(d,n,c,!1,null,"3157a3f7",null),f=h.exports,p={name:"LayoutWebMobile",components:{TopBarLeftDrawer:i["a"],TopBarRightDrawer:l["a"],GxBreadcrumb:f,GxIcon:r["a"]},props:{dark:{type:Boolean,default:!1},breadcrumb:{type:Boolean,default:!1},hasSearch:{type:Boolean,default:!1},onSearchClasses:{type:String,default:"text-black"},placeholder:{type:String,default:"Buscar"},hasDrawer:{type:Boolean,default:!1},hasDrawerRight:{type:Boolean,default:!1},hasStickyElement:{type:Boolean,default:!1},title:{type:String,default:null},icon:{type:String,default:""},iconClassWithoutScroll:{type:String,default:"text-black"},iconClassWithScroll:{type:String,default:"text-black"},topBarClassWithScroll:{type:String,default:""},topBarClassWithoutScroll:{type:String,default:"text-black bg-white"},iconClickHandler:{type:Function,default:null},iconRight:{type:String,default:null},iconRightClickHandler:{type:Function,default:null},withPaddingBottom:{type:Boolean,default:!0},noHorizontalPadding:{type:Boolean,default:!1},tabs:{type:Boolean,default:!1},breadcrumbClassesWithScroll:{type:Object,default:()=>({icon:"text-gray-700",next:"text-black",active:"text-primary"})},breadcrumbClassesWithoutScroll:{type:Object,default:()=>({icon:"text-gray-700",next:"text-black",active:"text-primary"})},searchTerm:{type:String,default:""}},data(){return{hasScrolled:!1,activeDeskTopBarMenu:null,drawerLeft:!1,mobileSearch:!1,drawerRight:!1,customTopBar:!1,drawerOPen:!1,search:""}},computed:{hasTopBar(){return this.title||this.icon||this.iconRight||this.hasDrawer},iconClasses(){return this.hasScrolled?this.iconClassWithScroll:this.iconClassWithoutScroll},topBarClasses(){return this.hasScrolled?(this.topBarClassWithScroll.includes("bg-"),this.topBarClassWithScroll):this.topBarClassWithoutScroll?this.topBarClassWithoutScroll:""},placeholderColor(){return"bg-primary-500 text-white"===this.onSearchClasses?"placeholder-bg-dark":"placeholder-bg-white"}},watch:{search(e){"mo"===this.$mq&&this.$emit("search",e)}},reactiveProvide:{name:"topBarSearch",include:["search"]},mounted(){this.$route.query.searchTerm&&this.hasSearch&&this.setMobileSearch(this.$route.query.searchTerm),this.$route.query.drawerRight&&this.$nextTick(()=>{this.drawerRight=!0;let e=Object.assign({},this.$route.query);delete e.drawerRight,this.$router.replace({query:e})});let e=0,t=!1;"de"===this.$mq?document.getElementById("gxDeMain")&&document.getElementById("gxDeMain").addEventListener("scroll",a=>{e=a.target.scrollTop,t||(window.requestAnimationFrame(()=>{this.hasScrolled=e>0,t=!1}),t=!0)}):window.addEventListener("scroll",a=>{e=window.scrollY,t||(window.requestAnimationFrame(()=>{this.hasScrolled=e>0,t=!1}),t=!0)})},created(){this.searchTerm&&(this.search=this.searchTerm,this.mobileSearch=!0)},methods:{onCloseDrawer(e){this[e]=!1,this.drawerOPen=!1},cancelMobileSearch(){this.search="",this.mobileSearch=!1},focusMobileSearch(){this.$refs.mobileSearch&&this.$refs.mobileSearch.focus()},onActiveMenu(e){this.activeDeskTopBarMenu=e},showCustomTopBar(){this.customTopBar=!0},hideCustomTopBar(){this.customTopBar=!1},setMobileSearch(e=""){this.search=e,this.mobileSearch=!0}}},b=p,g=(a("f320"),Object(m["a"])(b,s,o,!1,null,"f3d6798e",null));t["a"]=g.exports},4332:function(e,t,a){e.exports=a.p+"img/mo_001_6_sos.8d763d2e.svg"},"50bf":function(e,t,a){},"597e":function(e,t,a){},"60da":function(e,t,a){"use strict";var s=a("83ab"),o=a("d039"),r=a("df75"),i=a("7418"),l=a("d1e7"),n=a("7b0b"),c=a("44ad"),u=Object.assign,d=Object.defineProperty;e.exports=!u||o((function(){if(s&&1!==u({b:1},u(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},a=Symbol(),o="abcdefghijklmnopqrst";return e[a]=7,o.split("").forEach((function(e){t[e]=e})),7!=u({},e)[a]||r(u({},t)).join("")!=o}))?function(e,t){var a=n(e),o=arguments.length,u=1,d=i.f,m=l.f;while(o>u){var h,f=c(arguments[u++]),p=d?r(f).concat(d(f)):r(f),b=p.length,g=0;while(b>g)h=p[g++],s&&!m.call(f,h)||(a[h]=f[h])}return a}:u},"8e44":function(e,t,a){"use strict";var s=a("50bf"),o=a.n(s);o.a},"909f":function(e,t,a){e.exports=a.p+"img/mo_001_7_duda.05eab2a8.svg"},cca6:function(e,t,a){var s=a("23e7"),o=a("60da");s({target:"Object",stat:!0,forced:Object.assign!==o},{assign:o})},f320:function(e,t,a){"use strict";var s=a("597e"),o=a.n(s);o.a}}]);
//# sourceMappingURL=chunk-3ad0f45f.3b26808e.js.map